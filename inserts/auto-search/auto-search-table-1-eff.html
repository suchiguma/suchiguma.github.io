<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Search Table</title>
    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="/style.css">
    <script>
        window.onload = function () { 
        if (window.parent && window.parent.document) {
            try {
                const parentBodyClasses = window.parent.document.body.className;
                document.body.className = parentBodyClasses;
            } catch (error) {
            }
        }}
    </script>
    <style>
    .tablesorter-default .header,
    .tablesorter-default .tablesorter-header {
        background-position: center right;
        background-repeat: no-repeat;
        cursor: pointer;
        white-space: normal;
        padding: 2px 11px 2px 2px
    }
    .tablesorter-default thead .tablesorter-headerUnSorted:not(.sorter-false) {
        background-image: url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA6SURBVChTY0AG9fX1/6FMDMAIpVEUNTY2wsVhACyAzSR0xYz4rMNmMkFAtInEuxFKE/Q1CsDtDAYGAJ6mHP842xwvAAAAAElFTkSuQmCC);
    }
    .tablesorter-default thead .headerSortUp,
    .tablesorter-default thead .tablesorter-headerAsc,
    .tablesorter-default thead .tablesorter-headerSortUp {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXY0AG9fX1/6FMDMAIpVEUNTY2wsVhACyAzSR0xYz4rEMoZmAAAKOQDoDW8la6AAAAAElFTkSuQmCC);
        box-shadow: inset 0px -2px #888; 
    }
    .tablesorter-default thead .headerSortDown,
    .tablesorter-default thead .tablesorter-headerDesc,
    .tablesorter-default thead .tablesorter-headerSortDown {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAqSURBVBhXY6yvr//PgAM0NjYyQpkMYAY2xciKQADOQVaMrggD4HYGAwMAXoYOgNr59qMAAAAASUVORK5CYII=);
        box-shadow: inset 0px -2px #888; 
    }
    td:nth-child(1), td:nth-child(2) {
        text-align: center;
    }
    .znai-table td, .znai-table th {
        padding: .3em
    }
    ::-webkit-scrollbar {
        display: none;
    }
    body {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    </style>
</head>
<body>
    <div style="overflow-x: auto; min-width: 600px; border: 1px solid;"><table id="table1" class="znai-table" style="table-layout: fixed; display: table;">
        <thead>
            <tr>
                <th>Stage</th>
                <th>Perfect Oil</th>
                <th>Actual Oil</th>
                <th>Coins/Oil</th>
                <th>Retire Coins/Oil</th>
                <th>Total Exp/Oil</th>
            </tr>
        </thead>
        <tbody>
<tr><td>1-1</td><td>144</td><td>144</td><td>0.5486</td><td>0.7306</td><td>9.58</tr></td>
<tr><td>1-2</td><td>211</td><td>211</td><td>0.4573</td><td>0.6299</td><td>10.81</tr></td>
<tr><td>1-3</td><td>211</td><td>211</td><td>0.4557</td><td>0.6264</td><td>11.63</tr></td>
<tr><td>1-4</td><td>278</td><td>278</td><td>0.4196</td><td>0.5991</td><td>13.57</tr></td>
<tr><td>2-1</td><td>211</td><td>249.721</td><td>0.4367</td><td>0.618</td><td>15.52</tr></td>
<tr><td>2-2</td><td>278</td><td>308.302</td><td>0.4036</td><td>0.5802</td><td>16.93</tr></td>
<tr><td>2-3</td><td>278</td><td>300.923</td><td>0.4096</td><td>0.5898</td><td>18.52</tr></td>
<tr><td>2-4</td><td>278</td><td>319.129</td><td>0.4042</td><td>0.5867</td><td>20.12</tr></td>
<tr><td>3-1</td><td>278</td><td>281.863</td><td>0.4193</td><td>0.6007</td><td>21.63</tr></td>
<tr><td>3-2</td><td>278</td><td>344.498</td><td>0.39</td><td>0.5659</td><td>22.99</tr></td>
<tr><td>3-3</td><td>278</td><td>303.253</td><td>0.4058</td><td>0.5827</td><td>24.52</tr></td>
<tr><td>3-4</td><td>278</td><td>311.129</td><td>0.412</td><td>0.6</td><td>26.47</tr></td>
<tr><td>4-1</td><td>278</td><td>279.509</td><td>0.4225</td><td>0.6065</td><td>27.87</tr></td>
<tr><td>4-2</td><td>278</td><td>281.17</td><td>0.4238</td><td>0.6103</td><td>29.53</tr></td>
<tr><td>4-3</td><td>278</td><td>278</td><td>0.4302</td><td>0.6227</td><td>31.3</tr></td>
<tr><td>4-4</td><td>345</td><td>381.187</td><td>0.3882</td><td>0.5748</td><td>32.58</tr></td>
<tr><td>5-1</td><td>345</td><td>347.703</td><td>0.3962</td><td>0.5805</td><td>34.03</tr></td>
<tr><td>5-2</td><td>345</td><td>345.185</td><td>0.3983</td><td>0.5841</td><td>35.67</tr></td>
<tr><td>5-3</td><td>345</td><td>350.004</td><td>0.3998</td><td>0.5894</td><td>37.37</tr></td>
<tr><td>5-4</td><td>345</td><td>358.71</td><td>0.3979</td><td>0.5885</td><td>38.99</tr></td>
<tr><td>6-1</td><td>345</td><td>350.256</td><td>0.4</td><td>0.5898</td><td>40.5</tr></td>
<tr><td>6-2</td><td>345</td><td>374.227</td><td>0.3928</td><td>0.5824</td><td>42.05</tr></td>
<tr><td>6-3</td><td>345</td><td>354.177</td><td>0.4025</td><td>0.597</td><td>43.87</tr></td>
<tr><td>6-4</td><td>412</td><td>414.956</td><td>0.3864</td><td>0.5804</td><td>45.41</tr></td>
<tr><td>7-1</td><td>412</td><td>508.122</td><td>0.3622</td><td>0.5473</td><td>45.89</tr></td>
<tr><td>7-2</td><td>412</td><td>412</td><td>0.3839</td><td>0.574</td><td>47.25</tr></td>
<tr><td>7-3</td><td>412</td><td>455.715</td><td>0.3812</td><td>0.579</td><td>48.78</tr></td>
<tr><td>7-4</td><td>412</td><td>435.559</td><td>0.3857</td><td>0.5843</td><td>49.87</tr></td>
<tr><td>8-1</td><td>345</td><td>371.126</td><td>0.3937</td><td>0.5833</td><td>47.72</tr></td>
<tr><td>8-2</td><td>345</td><td>371.052</td><td>0.3944</td><td>0.5848</td><td>48.82</tr></td>
<tr><td>8-3</td><td>345</td><td>360.373</td><td>0.4042</td><td>0.603</td><td>50.4</tr></td>
<tr><td>8-4</td><td>345</td><td>366.912</td><td>0.4026</td><td>0.6016</td><td>51.36</tr></td>
<tr><td>9-1</td><td>182</td><td>197.547</td><td>4.4017</td><td>4.8356</td><td>118.24</tr></td>
<tr><td>9-2</td><td>188</td><td>188.449</td><td>4.8203</td><td>5.2425</td><td>116.28</tr></td>
<tr><td>9-3</td><td>194</td><td>206.679</td><td>4.6941</td><td>5.1205</td><td>116.55</tr></td>
<tr><td>9-4</td><td>200</td><td>218.37</td><td>4.6837</td><td>5.0986</td><td>115.45</tr></td>
<tr><td>10-1</td><td>238</td><td>240.407</td><td>5.0361</td><td>5.3951</td><td>111.11</tr></td>
<tr><td>10-2</td><td>245</td><td>256.751</td><td>5.0213</td><td>5.3712</td><td>109.29</tr></td>
<tr><td>10-3</td><td>252</td><td>252.342</td><td>5.4255</td><td>5.7924</td><td>109.87</tr></td>
<tr><td>10-4</td><td>259</td><td>279.03</td><td>5.1947</td><td>5.5534</td><td>109.32</tr></td>
<tr><td>11-1</td><td>267</td><td>267</td><td>5.5276</td><td>5.8553</td><td>132.39</tr></td>
<tr><td>11-2</td><td>274</td><td>275.787</td><td>5.7093</td><td>6.0275</td><td>130.1</tr></td>
<tr><td>11-3</td><td>281</td><td>281.389</td><td>5.9674</td><td>6.2967</td><td>129.74</tr></td>
<tr><td>11-4</td><td>288</td><td>288.635</td><td>6.1969</td><td>6.5197</td><td>127.95</tr></td>
<tr><td>12-1</td><td>296</td><td>296.756</td><td>6.0838</td><td>6.38</td><td>124.76</tr></td>
<tr><td>12-2</td><td>303</td><td>303</td><td>6.3589</td><td>6.6469</td><td>122.66</tr></td>
<tr><td>12-3</td><td>310</td><td>310.456</td><td>6.5657</td><td>6.8651</td><td>122.81</tr></td>
<tr><td>12-4</td><td>317</td><td>317.819</td><td>6.7958</td><td>7.0896</td><td>121.17</tr></td>
<tr><td>13-1</td><td>325</td><td>325</td><td>6.6967</td><td>6.9757</td><td>119.16</tr></td>
<tr><td>13-2</td><td>332</td><td>332</td><td>7.0148</td><td>7.2859</td><td>117.3</tr></td>
<tr><td>13-3</td><td>339</td><td>339.074</td><td>7.3142</td><td>7.5947</td><td>117.41</tr></td>
<tr><td>13-4</td><td>392</td><td>392</td><td>7.634</td><td>7.9154</td><td>117.13</tr></td>
<tr><td>14-1</td><td>333</td><td>333</td><td>6.8061</td><td>7.0676</td><td>120.06</tr></td>
<tr><td>14-2</td><td>340</td><td>340</td><td>7.1405</td><td>7.4085</td><td>119.85</tr></td>
<tr><td>14-3</td><td>347</td><td>347</td><td>7.379</td><td>7.6621</td><td>120.57</tr></td>
<tr><td>14-4</td><td>401</td><td>401</td><td>7.812</td><td>8.0876</td><td>119.36</tr></td>
<tr><td>15-1</td><td>341</td><td>341</td><td>6.9055</td><td>7.1982</td><td>123.8</tr></td>
<tr><td>15-2</td><td>348</td><td>349.098</td><td>7.1766</td><td>7.4638</td><td>121.84</tr></td>
<tr><td>15-3</td><td>371</td><td>371</td><td>7.1659</td><td>7.4341</td><td>116.58</tr></td>
<tr><td>15-4</td><td>490</td><td>490</td><td>6.5441</td><td>6.812</td><td>115.3</tr></td>
        </tbody>
    </table></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js"></script>
    <script>
    function getColor(value, min, max) {
      const half = (min + max) / 2;
      const percent = Math.max(0, (value - half) / (max - half || 1));
      const r = 0;
      const g = 170;
      const b = 0;
      const a = percent * 0.4;
      return `rgba(${r},${g},${b},${a})`; // translucent yellow â†’ red
    }

    function applyColorGradients() {
      const table = document.getElementById("table1");
      const rows = Array.from(table.tBodies[0].rows);
      const colIndices = [3, 4, 5];

      for (const col of colIndices) {
        const values = rows.map(row => parseFloat(row.cells[col].textContent)).filter(v => !isNaN(v));
        const min = Math.min(...values);
        const max = Math.max(...values);

        rows.forEach(row => {
          const cell = row.cells[col];
          const val = parseFloat(cell.textContent);
          if (!isNaN(val)) {
            cell.style.backgroundColor = getColor(val, min, max);
          } else {
            cell.style.backgroundColor = "transparent";
          }
        });
      }
    }

    $(document).ready(function () {
      const $table = $("#table1").tablesorter({
        sortReset: true,
        sortRestart: true,
        widthFixed: true
      });

      // Apply color after initial load
      applyColorGradients();

      // Reapply color after sorting
      $table.on("sortEnd", function () {
        applyColorGradients();
      });
    });
  </script>
</body>
</html>
