<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Search Table</title>
    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="/style.css">
    <script>
        window.onload = function () { 
        if (window.parent && window.parent.document) {
            try {
                const parentBodyClasses = window.parent.document.body.className;
                document.body.className = parentBodyClasses;
            } catch (error) {
            }
        }}
    </script>
    <style>
    .tablesorter-default .header,
    .tablesorter-default .tablesorter-header {
        background-position: center right;
        background-repeat: no-repeat;
        cursor: pointer;
        white-space: normal;
        padding: 2px 11px 2px 2px
    }
    .tablesorter-default thead .tablesorter-headerUnSorted:not(.sorter-false) {
        background-image: url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA6SURBVChTY0AG9fX1/6FMDMAIpVEUNTY2wsVhACyAzSR0xYz4rMNmMkFAtInEuxFKE/Q1CsDtDAYGAJ6mHP842xwvAAAAAElFTkSuQmCC);
    }
    .tablesorter-default thead .headerSortUp,
    .tablesorter-default thead .tablesorter-headerAsc,
    .tablesorter-default thead .tablesorter-headerSortUp {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXY0AG9fX1/6FMDMAIpVEUNTY2wsVhACyAzSR0xYz4rEMoZmAAAKOQDoDW8la6AAAAAElFTkSuQmCC);
        box-shadow: inset 0px -2px #888; 
    }
    .tablesorter-default thead .headerSortDown,
    .tablesorter-default thead .tablesorter-headerDesc,
    .tablesorter-default thead .tablesorter-headerSortDown {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAqSURBVBhXY6yvr//PgAM0NjYyQpkMYAY2xciKQADOQVaMrggD4HYGAwMAXoYOgNr59qMAAAAASUVORK5CYII=);
        box-shadow: inset 0px -2px #888; 
    }
    td:nth-child(1), td:nth-child(2) {
        text-align: center;
    }
    .znai-table td, .znai-table th {
        padding: .3em
    }
    ::-webkit-scrollbar {
        display: none;
    }
    body {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    </style>
</head>
<body>
    <div style="overflow-x: auto; min-width: 600px; border: 1px solid;"><table id="table1" class="znai-table" style="table-layout: fixed; display: table;">
        <thead>
            <tr>
                <th>Stage</th>
                <th>Perfect Oil</th>
                <th>Actual Oil</th>
                <th>Coins/Oil</th>
                <th>Retire Coins/Oil</th>
                <th>Total Exp/Oil</th>
                <th>Mob Exp/Oil</th>
                <th>Boss Exp/Oil</th>
            </tr>
        </thead>
        <tbody>
<tr><td>9-1</td><td>182</td><td>218.017</td><td>4.0535</td><td>4.4877</td><td>118.98</td><td>98.98</td><td>20.01</tr></td>
<tr><td>9-2</td><td>188</td><td>231.394</td><td>4.0504</td><td>4.4728</td><td>117.77</td><td>98.53</td><td>19.24</tr></td>
<tr><td>9-3</td><td>194</td><td>214.285</td><td>4.5517</td><td>4.9791</td><td>116.87</td><td>95.7</td><td>21.17</tr></td>
<tr><td>9-4</td><td>200</td><td>218.616</td><td>4.679</td><td>5.0938</td><td>115.45</td><td>94.31</td><td>21.13</tr></td>
<tr><td>10-1</td><td>238</td><td>240.865</td><td>5.0276</td><td>5.3866</td><td>111.12</td><td>91.44</td><td>19.68</tr></td>
<tr><td>10-2</td><td>245</td><td>262.661</td><td>4.9214</td><td>5.2714</td><td>109.43</td><td>91.2</td><td>18.23</tr></td>
<tr><td>10-3</td><td>252</td><td>256.422</td><td>5.3484</td><td>5.7155</td><td>109.97</td><td>90.97</td><td>19.0</tr></td>
<tr><td>10-4</td><td>259</td><td>279.372</td><td>5.1891</td><td>5.5479</td><td>109.33</td><td>91.59</td><td>17.74</tr></td>
<tr><td>11-1</td><td>267</td><td>267</td><td>5.5277</td><td>5.8555</td><td>132.4</td><td>108.78</td><td>23.62</tr></td>
<tr><td>11-2</td><td>274</td><td>275.768</td><td>5.7098</td><td>6.0279</td><td>130.1</td><td>107.04</td><td>23.06</tr></td>
<tr><td>11-3</td><td>281</td><td>281.383</td><td>5.9675</td><td>6.297</td><td>129.75</td><td>106.97</td><td>22.77</tr></td>
<tr><td>11-4</td><td>288</td><td>288.63</td><td>6.197</td><td>6.5199</td><td>127.96</td><td>105.55</td><td>22.41</tr></td>
<tr><td>12-1</td><td>296</td><td>296.75</td><td>6.084</td><td>6.3803</td><td>124.77</td><td>102.61</td><td>22.16</tr></td>
<tr><td>12-2</td><td>303</td><td>303</td><td>6.3588</td><td>6.6468</td><td>122.65</td><td>100.77</td><td>21.88</tr></td>
<tr><td>12-3</td><td>310</td><td>310.456</td><td>6.5657</td><td>6.865</td><td>122.8</td><td>101.26</td><td>21.55</tr></td>
<tr><td>12-4</td><td>317</td><td>317.818</td><td>6.7958</td><td>7.0897</td><td>121.17</td><td>99.97</td><td>21.2</tr></td>
<tr><td>13-1</td><td>325</td><td>325</td><td>6.6969</td><td>6.976</td><td>119.18</td><td>98.12</td><td>21.06</tr></td>
<tr><td>13-2</td><td>332</td><td>332</td><td>7.0148</td><td>7.2858</td><td>117.29</td><td>96.51</td><td>20.78</tr></td>
<tr><td>13-3</td><td>339</td><td>339.082</td><td>7.3139</td><td>7.5944</td><td>117.4</td><td>96.89</td><td>20.51</tr></td>
<tr><td>13-4</td><td>392</td><td>392</td><td>7.634</td><td>7.9154</td><td>117.13</td><td>99.26</td><td>17.88</tr></td>
<tr><td>14-1</td><td>333</td><td>333</td><td>6.8061</td><td>7.0676</td><td>120.06</td><td>98.17</td><td>21.89</tr></td>
<tr><td>14-2</td><td>340</td><td>340</td><td>7.1405</td><td>7.4085</td><td>119.85</td><td>98.25</td><td>21.6</tr></td>
<tr><td>14-3</td><td>347</td><td>347</td><td>7.379</td><td>7.6621</td><td>120.57</td><td>99.25</td><td>21.32</tr></td>
<tr><td>14-4</td><td>401</td><td>401</td><td>7.812</td><td>8.0875</td><td>119.36</td><td>100.77</td><td>18.58</tr></td>
<tr><td>15-1</td><td>341</td><td>341</td><td>6.9055</td><td>7.1982</td><td>123.8</td><td>101.94</td><td>21.85</tr></td>
<tr><td>15-2</td><td>348</td><td>349.078</td><td>7.177</td><td>7.4641</td><td>121.83</td><td>100.4</td><td>21.43</tr></td>
<tr><td>15-3</td><td>371</td><td>371</td><td>7.1681</td><td>7.4391</td><td>116.9</td><td>78.45</td><td>38.44</tr></td>
<tr><td>15-4</td><td>490</td><td>490</td><td>6.5447</td><td>6.8135</td><td>115.4</td><td>72.34</td><td>43.05</tr></td>
        </tbody>
    </table></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js"></script>
    <script>
    function getColor(value, min, max) {
      const percent = (value - min) / (max - min || 1);
      // const percent = value / max;
      const r = 0;
      const g = 170;
      const b = 0;
      const a = percent * 0.4;
      return `rgba(${r},${g},${b},${a})`; // translucent yellow â†’ red
    }

    function applyColorGradients() {
      const table = document.getElementById("table1");
      const rows = Array.from(table.tBodies[0].rows);
      const colIndices = [3, 4, 6];

      for (const col of colIndices) {
        const values = rows.map(row => parseFloat(row.cells[col].textContent)).filter(v => !isNaN(v));
        const min = Math.min(...values);
        const max = Math.max(...values);

        rows.forEach(row => {
          const cell = row.cells[col];
          const val = parseFloat(cell.textContent);
          if (!isNaN(val)) {
            cell.style.backgroundColor = getColor(val, min, max);
          } else {
            cell.style.backgroundColor = "transparent";
          }
        });
      }
    }

    $(document).ready(function () {
      const $table = $("#table1").tablesorter({
        sortReset: true,
        sortRestart: true,
        widthFixed: true
      });

      // Apply color after initial load
      applyColorGradients();

      // Reapply color after sorting
      $table.on("sortEnd", function () {
        applyColorGradients();
      });
    });
  </script>
</body>
</html>
