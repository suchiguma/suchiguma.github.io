<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Search Table</title>
    <link rel="stylesheet" href="/static/main.css">
    <link rel="stylesheet" href="/style.css">
    <script>
        window.onload = function () { 
        if (window.parent && window.parent.document) {
            try {
                const parentBodyClasses = window.parent.document.body.className;
                document.body.className = parentBodyClasses;
            } catch (error) {
            }
        }}
    </script>
    <style>
    .tablesorter-default .header,
    .tablesorter-default .tablesorter-header {
        background-position: center right;
        background-repeat: no-repeat;
        cursor: pointer;
        white-space: normal;
        padding: 2px 11px 2px 2px
    }
    .tablesorter-default thead .tablesorter-headerUnSorted:not(.sorter-false) {
        background-image: url(data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAA6SURBVChTY0AG9fX1/6FMDMAIpVEUNTY2wsVhACyAzSR0xYz4rMNmMkFAtInEuxFKE/Q1CsDtDAYGAJ6mHP842xwvAAAAAElFTkSuQmCC);
    }
    .tablesorter-default thead .headerSortUp,
    .tablesorter-default thead .tablesorter-headerAsc,
    .tablesorter-default thead .tablesorter-headerSortUp {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAArSURBVBhXY0AG9fX1/6FMDMAIpVEUNTY2wsVhACyAzSR0xYz4rEMoZmAAAKOQDoDW8la6AAAAAElFTkSuQmCC);
        box-shadow: inset 0px -2px #888; 
    }
    .tablesorter-default thead .headerSortDown,
    .tablesorter-default thead .tablesorter-headerDesc,
    .tablesorter-default thead .tablesorter-headerSortDown {
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAqSURBVBhXY6yvr//PgAM0NjYyQpkMYAY2xciKQADOQVaMrggD4HYGAwMAXoYOgNr59qMAAAAASUVORK5CYII=);
        box-shadow: inset 0px -2px #888; 
    }
    td:nth-child(1), td:nth-child(2) {
        text-align: center;
    }
    .znai-table td, .znai-table th {
        padding: .3em
    }
    ::-webkit-scrollbar {
        display: none;
    }
    body {
        scrollbar-width: none;
        -ms-overflow-style: none;
    }
    </style>
</head>
<body>
    <div style="overflow-x: auto; min-width: 600px; border: 1px solid;"><table id="table1" class="znai-table" style="table-layout: fixed; display: table;">
        <thead>
            <tr>
                <th>Stage</th>
                <th>Perfect Oil</th>
                <th>Actual Oil</th>
                <th>Coins/Oil</th>
                <th>Retire Coins/Oil</th>
                <th>Total Exp/Oil</th>
                <th>Mob Exp/Oil</th>
                <th>Boss Exp/Oil</th>
            </tr>
        </thead>
        <tbody>
<tr><td>9-1</td><td>182</td><td>217.986</td><td>4.054</td><td>4.4883</td><td>118.99</td><td>78.16</td><td>40.83</tr></td>
<tr><td>9-2</td><td>188</td><td>230.661</td><td>4.0611</td><td>4.4836</td><td>117.75</td><td>75.46</td><td>42.29</tr></td>
<tr><td>9-3</td><td>194</td><td>214.145</td><td>4.5544</td><td>4.982</td><td>116.88</td><td>84.0</td><td>32.88</tr></td>
<tr><td>9-4</td><td>200</td><td>211.827</td><td>4.8108</td><td>5.2286</td><td>115.46</td><td>86.78</td><td>28.67</tr></td>
<tr><td>10-1</td><td>238</td><td>240.851</td><td>5.0279</td><td>5.387</td><td>111.12</td><td>90.06</td><td>21.07</tr></td>
<tr><td>10-2</td><td>245</td><td>262.697</td><td>4.9208</td><td>5.2708</td><td>109.43</td><td>83.46</td><td>25.97</tr></td>
<tr><td>10-3</td><td>252</td><td>256.051</td><td>5.3552</td><td>5.7221</td><td>109.95</td><td>89.09</td><td>20.85</tr></td>
<tr><td>10-4</td><td>259</td><td>279.203</td><td>5.1919</td><td>5.5506</td><td>109.32</td><td>83.32</td><td>26.0</tr></td>
<tr><td>11-1</td><td>267</td><td>267</td><td>5.5277</td><td>5.8554</td><td>132.39</td><td>108.77</td><td>23.62</tr></td>
<tr><td>11-2</td><td>274</td><td>275.754</td><td>5.71</td><td>6.0281</td><td>130.09</td><td>106.16</td><td>23.94</tr></td>
<tr><td>11-3</td><td>281</td><td>281.37</td><td>5.9678</td><td>6.2972</td><td>129.74</td><td>106.79</td><td>22.95</tr></td>
<tr><td>11-4</td><td>288</td><td>288.657</td><td>6.1965</td><td>6.5194</td><td>127.96</td><td>105.25</td><td>22.71</tr></td>
<tr><td>12-1</td><td>296</td><td>296.757</td><td>6.0838</td><td>6.38</td><td>124.76</td><td>102.28</td><td>22.48</tr></td>
<tr><td>12-2</td><td>303</td><td>303</td><td>6.3589</td><td>6.6469</td><td>122.66</td><td>100.78</td><td>21.88</tr></td>
<tr><td>12-3</td><td>310</td><td>310.468</td><td>6.5654</td><td>6.8646</td><td>122.8</td><td>101.06</td><td>21.74</tr></td>
<tr><td>12-4</td><td>317</td><td>318.081</td><td>6.7906</td><td>7.0845</td><td>121.18</td><td>99.57</td><td>21.61</tr></td>
<tr><td>13-1</td><td>325</td><td>325</td><td>6.6968</td><td>6.9759</td><td>119.18</td><td>98.11</td><td>21.06</tr></td>
<tr><td>13-2</td><td>332</td><td>332</td><td>7.0148</td><td>7.2858</td><td>117.29</td><td>96.51</td><td>20.78</tr></td>
<tr><td>13-3</td><td>339</td><td>339.068</td><td>7.3142</td><td>7.5947</td><td>117.4</td><td>96.87</td><td>20.53</tr></td>
<tr><td>13-4</td><td>392</td><td>392</td><td>7.6337</td><td>7.9148</td><td>117.1</td><td>99.22</td><td>17.88</tr></td>
<tr><td>14-1</td><td>333</td><td>333</td><td>6.8061</td><td>7.0677</td><td>120.07</td><td>98.18</td><td>21.89</tr></td>
<tr><td>14-2</td><td>340</td><td>340</td><td>7.1406</td><td>7.4088</td><td>119.87</td><td>98.27</td><td>21.6</tr></td>
<tr><td>14-3</td><td>347</td><td>347</td><td>7.3789</td><td>7.6619</td><td>120.56</td><td>99.24</td><td>21.32</tr></td>
<tr><td>14-4</td><td>401</td><td>401</td><td>7.8119</td><td>8.0874</td><td>119.35</td><td>100.77</td><td>18.58</tr></td>
<tr><td>15-1</td><td>341</td><td>341</td><td>6.9055</td><td>7.1982</td><td>123.8</td><td>101.95</td><td>21.85</tr></td>
<tr><td>15-2</td><td>348</td><td>349.092</td><td>7.1767</td><td>7.4639</td><td>121.84</td><td>100.4</td><td>21.43</tr></td>
<tr><td>15-3</td><td>371</td><td>371</td><td>7.1681</td><td>7.4391</td><td>116.9</td><td>78.46</td><td>38.44</tr></td>
<tr><td>15-4</td><td>490</td><td>490</td><td>6.5452</td><td>6.8145</td><td>115.46</td><td>72.41</td><td>43.05</tr></td>
        </tbody>
    </table></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.31.3/js/jquery.tablesorter.min.js"></script>
    <script>
    function getColor(value, min, max) {
      const percent = (value - min) / (max - min || 1);
      // const percent = value / max;
      const r = 0;
      const g = 170;
      const b = 0;
      const a = percent * 0.4;
      return `rgba(${r},${g},${b},${a})`; // translucent yellow â†’ red
    }

    function applyColorGradients() {
      const table = document.getElementById("table1");
      const rows = Array.from(table.tBodies[0].rows);
      const colIndices = [3, 4, 6];

      for (const col of colIndices) {
        const values = rows.map(row => parseFloat(row.cells[col].textContent)).filter(v => !isNaN(v));
        const min = Math.min(...values);
        const max = Math.max(...values);

        rows.forEach(row => {
          const cell = row.cells[col];
          const val = parseFloat(cell.textContent);
          if (!isNaN(val)) {
            cell.style.backgroundColor = getColor(val, min, max);
          } else {
            cell.style.backgroundColor = "transparent";
          }
        });
      }
    }

    $(document).ready(function () {
      const $table = $("#table1").tablesorter({
        sortReset: true,
        sortRestart: true,
        widthFixed: true
      });

      // Apply color after initial load
      applyColorGradients();

      // Reapply color after sorting
      $table.on("sortEnd", function () {
        applyColorGradients();
      });
    });
  </script>
</body>
</html>
